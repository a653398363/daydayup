<!--
 * @Author: fange 653398363@qq.com
 * @Date: 2023-02-07 09:53:15
 * @LastEditors: fange 653398363@qq.com
 * @LastEditTime: 2023-02-13 10:27:11
 * @FilePath: \lfange.github.io\code\test.html
 * @Description: personal written
-->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>

  <body>
    <script>
      let person2 = { name: 'fange', age: 18, city: 'chengdu' }
      let text = ''
      for (let i in person2) {
        if (i === 'age') break
        console.log('i', i)
        text += person2[i]
      }

      // 输出：fange18chengdu

      //其次在尝试一些数组
      let arry = [{ keys: '1ss' }, { keys: '1ss' }]
      for (let i of arry) {
        console.log('arry[i]', i)
      }
      //1 2 3 4 5

      // 构造函数（类）
      function Person(name) {
        this.name = name
      }
      // new了一个实例 （对象）
      var person = new Person('构造函数')
      console.log(person) //Person { name: '构造函数' }
      console.log(Person.prototype) //构造函数（类）的原型对象
      Person.prototype.count = 18 // 构造函数原型
      console.log(person.count) // 18
      console.log('prototype', Person.prototype.constructor === Person) //构造函数（类）的原型对象

      function log() {
        console.log.apply(console, arguments)
      }

      log(2222)
      const arr = [
        {
          id: 2,
          name: '部门B',
          pid: 0,
        },
        {
          id: 3,
          name: '部门C',
          pid: 1,
        },
        {
          id: 1,
          name: '部门A',
          pid: 2,
        },
        {
          id: 4,
          name: '部门D',
          pid: 1,
        },
        {
          id: 5,
          name: '部门E',
          pid: 2,
        },
        {
          id: 6,
          name: '部门F',
          pid: 3,
        },
        {
          id: 7,
          name: '部门G',
          pid: 2,
        },
        {
          id: 8,
          name: '部门H',
          pid: 4,
        },
      ]

      console.log('arr)', flat(recrui(arr)))

      function flat(obj, res = []) {
        // 默认初始结果数组为[]
        res.push(obj) // 当前元素入栈
        // 若元素包含children，则遍历children并递归调用使每一个子元素入栈
        if (obj.children && obj.children.length) {
          for (const item of obj.children) {
            flat(item, res)
          }
        }
        return res
      }

      function recrui(data) {
        const cache = {}
        data.forEach((it) => {
          cache[it.id] = it
        })

        const res = []
        data.forEach((it) => {
          const parent = cache[it.pid]
          if (parent) (parent.children || (parent.children = [])).push(it)
          else res.push(it)
        })

        return res[0]
      }
    </script>

    <ul id="box">
      <li class="a">测试1</li>
      <li class="a">测试2</li>
      <li class="a">测试3</li>
    </ul>
    <script type="text/javascript">
      var ul = document.querySelector('ul')

      var list = ul.querySelectorAll('li')
      for (var i = 0; i < list.length; i++) {
        ul.appendChild(document.createElement('li'))
      }

      console.log('list.length：', list.length) //输出的结果仍然是 3，不是此时 li 的数量 6
      console.dir(document.getElementById('box').length) // 6
    </script>
  </body>
</html>
